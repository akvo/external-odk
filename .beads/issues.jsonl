{"id":"ExternalODK-0s3","title":"UI \u0026 Navigation logic based on docs/ui-and-navigation-logic.md","notes":"Visualizing the App using Mock Data reflecting the Generic Schema","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-01-21T08:56:19.487705943+07:00","created_by":"iwan","updated_at":"2026-01-22T07:06:36.160439671+07:00","closed_at":"2026-01-21T15:21:39.360286+07:00"}
{"id":"ExternalODK-0s3.1","title":"Navigation \u0026 Scaffold Setup","notes":"Add Hilt \u0026 Kotlinx Serialization plugins. Add Room dependencies","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-21T09:11:22.894451352+07:00","created_by":"iwan","updated_at":"2026-01-21T09:54:40.661745353+07:00","closed_at":"2026-01-21T09:54:40.661745353+07:00","close_reason":"Added Hilt, Kotlinx Serialization, Room, and Navigation dependencies. Created navigation routes and NavHost with 6 screen destinations. Set up MainActivity with navigation scaffold and Hilt Application class.","dependencies":[{"issue_id":"ExternalODK-0s3.1","depends_on_id":"ExternalODK-0s3","type":"parent-child","created_at":"2026-01-21T09:11:22.904273753+07:00","created_by":"iwan"}]}
{"id":"ExternalODK-0s3.2","title":"Login Screen (UI)","description":"Build Login Screen with Basic Auth fields","notes":"Compose 'LoginScreen'. Inputs: Username, Password, Server URL, Form ID. Button: Label . Use Mock Data in ViewModel to simulate  -\u003e  flow.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T09:13:11.433750494+07:00","created_by":"iwan","updated_at":"2026-01-21T10:43:24.228573559+07:00","closed_at":"2026-01-21T10:43:24.228573559+07:00","close_reason":"Implemented LoginScreen with 4 OutlinedTextFields (username, password, server URL, form ID), validation logic (button disabled when fields empty), and LoginViewModel with StateFlow. Added 2 previews.","dependencies":[{"issue_id":"ExternalODK-0s3.2","depends_on_id":"ExternalODK-0s3","type":"parent-child","created_at":"2026-01-21T09:13:11.450943779+07:00","created_by":"iwan"}]}
{"id":"ExternalODK-0s3.3","title":"Dashboard \u0026 List (UI)","description":"Build Home Screen using ONLY System Fields (submittedBy, time).","notes":"Compose 'HomeDashboardScreen' with LazyColumn. Create 'SubmissionListItem' showing:\n- submittedBy (e.g., ifirmawan)\n- submissionTime (Formatted Date)\n- Status Badge (Synced). Note: DO NOT attempt to display dynamic fields (like region) yet.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-21T09:15:50.391608642+07:00","created_by":"iwan","updated_at":"2026-01-21T11:11:06.940272895+07:00","closed_at":"2026-01-21T11:11:06.940272895+07:00","close_reason":"Implemented HomeDashboardScreen with LazyColumn, SubmissionListItem component with StatusBadge, HomeViewModel with mock data, and FAB for resync.","dependencies":[{"issue_id":"ExternalODK-0s3.3","depends_on_id":"ExternalODK-0s3","type":"parent-child","created_at":"2026-01-21T09:15:50.408757023+07:00","created_by":"iwan"}]}
{"id":"ExternalODK-0s3.4","title":"Detail \u0026 Result Screens (UI)","description":"Build screens for viewing generic data.","notes":"Screens: LoadingScreen (generic with message param), DownloadCompleteScreen, SyncCompleteScreen","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-21T09:29:04.543089583+07:00","created_by":"iwan","updated_at":"2026-01-21T11:24:56.219201137+07:00","closed_at":"2026-01-21T11:24:56.219201137+07:00","close_reason":"Implemented LoadingScreen with CircularProgressIndicator and 2s mock delay, DownloadCompleteScreen with summary and View/Resync buttons, SyncCompleteScreen with sync stats. Full mock navigation flow working.","dependencies":[{"issue_id":"ExternalODK-0s3.4","depends_on_id":"ExternalODK-0s3","type":"parent-child","created_at":"2026-01-21T09:29:04.560249822+07:00","created_by":"iwan"}]}
{"id":"ExternalODK-29d","title":"Add Logout button with confirm dialog that all local data will be erased and it cannot be undone in HomeDashboardScreen","description":"Add a Logout option menu to the HomeDashboardScreen TopAppBar/ActionBar. When clicked, show a confirmation AlertDialog warning that all local data will be erased and this action cannot be undone. On confirm, call a placeholder function (TODO: actual data clearing) and navigate back to LoginScreen.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-21T11:27:06.048426664+07:00","created_by":"iwan","updated_at":"2026-01-21T11:45:00.407037628+07:00","closed_at":"2026-01-21T11:45:00.407037628+07:00","close_reason":"Added overflow menu with Logout option, confirmation AlertDialog, and search functionality with SearchView icon in TopAppBar that filters static data immediately.","dependencies":[{"issue_id":"ExternalODK-29d","depends_on_id":"ExternalODK-0s3","type":"blocks","created_at":"2026-01-21T11:32:36.738656007+07:00","created_by":"iwan"}]}
{"id":"ExternalODK-5uv","title":"Database Setup \u0026 Entities","description":"Define the offline storage schema.","notes":"Implemented Generic Hybrid Schema with Room: SubmissionEntity (system columns + rawData JSON blob), FormMetadataEntity (sync tracking), SubmissionDao (CRUD queries), FormMetadataDao, AppDatabase with TypeConverters, Hilt DatabaseModule, and Kotlinx Serialization DTOs (KoboSubmissionDto, KoboDataResponse). Build verified successful.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-21T15:28:42.677016+07:00","created_by":"iwanfirmawan","updated_at":"2026-01-21T16:27:06.847997+07:00","closed_at":"2026-01-21T16:27:06.848847+07:00","dependencies":[{"issue_id":"ExternalODK-5uv","depends_on_id":"ExternalODK-pg8","type":"parent-child","created_at":"2026-01-21T15:35:59.586337+07:00","created_by":"iwanfirmawan"}]}
{"id":"ExternalODK-6sy","title":"API INTEGRATION (Dynamic \u0026 Basic Auth)","description":"Implement KoboToolbox API integration with Basic Auth and dynamic JSON parsing.\n\n## Scope\nConnect the app to KoboToolbox API to fetch form submissions. The database layer (Room) and DTOs are already implemented.\n\n## Child Tasks (in order)\n1. **Networking Layer Setup** (ExternalODK-qwy) - P1\n   - Add Retrofit/OkHttp dependencies\n   - BasicAuthInterceptor for authentication\n   - KoboApiService interface\n   - NetworkModule for Hilt DI\n\n2. **Initial Download Parsing** (ExternalODK-if7) - P1\n   - KoboRepository implementation\n   - Pagination with limit=300\n   - DTO to Entity transformation\n   - Batch database inserts\n\n3. **Resync Logic Delta** (ExternalODK-c22) - P2\n   - Delta sync using lastSyncTimestamp\n   - Fetch only new submissions\n   - Upsert based on _uuid\n\n## Prerequisites Already Done\n- Room database with SubmissionEntity and FormMetadataEntity\n- DAOs with insert, query, and upsert operations\n- DTOs for KoboToolbox API responses\n- Kotlinx Serialization configured\n- Hilt DI infrastructure\n\n## API Reference\n- Base URL: https://kf.kobotoolbox.org\n- Endpoint: /api/v2/assets/{assetUid}/data.json\n- Auth: Basic Auth (Base64 encoded username:password)","status":"open","priority":0,"issue_type":"epic","created_at":"2026-01-22T18:40:11.427469521+07:00","created_by":"iwan","updated_at":"2026-01-22T19:57:05.183436969+07:00"}
{"id":"ExternalODK-c22","title":"Resync Logic (Delta)","description":"Implement delta sync to fetch only new/updated submissions since last sync.\n\n## Implementation Tasks\n\n1. Extend KoboRepository with resync functionality\n   - Implement resync(assetUid: String) suspend function\n   - Get lastSyncTimestamp from FormMetadataEntity\n   - Add query parameter: submissionTime__gt=lastSyncTimestamp\n\n2. Handle Delta Response\n   - Fetch submissions where submissionTime \u003e lastSyncTimestamp\n   - Transform to entities (same as initial download)\n   - Perform upsert based on _uuid (ON CONFLICT REPLACE)\n\n3. Update Sync State\n   - After successful sync, update FormMetadataEntity.lastSyncTimestamp\n   - Use latest submission's timestamp for next delta\n\n## Database Support (Already Implemented)\n- FormMetadataEntity has lastSyncTimestamp field\n- SubmissionDao.insertAll uses ON CONFLICT REPLACE strategy\n- FormMetadataDao.insertOrUpdate handles upsert\n\n## Dependencies\n- Requires Initial Download (ExternalODK-if7) to be completed first","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-22T18:46:54.112561034+07:00","created_by":"iwan","updated_at":"2026-01-22T19:56:52.626693624+07:00","dependencies":[{"issue_id":"ExternalODK-c22","depends_on_id":"ExternalODK-6sy","type":"parent-child","created_at":"2026-01-22T18:52:14.438927229+07:00","created_by":"iwan"},{"issue_id":"ExternalODK-c22","depends_on_id":"ExternalODK-if7","type":"blocks","created_at":"2026-01-22T22:46:53.763331212+07:00","created_by":"iwan"}]}
{"id":"ExternalODK-gd8","title":"Add lazy loading pagination to HomeDashboardScreen","description":"Implement pagination with mock data: generate items on demand, detect scroll near bottom, show loading indicator, load 10 items per page with simulated delay. Add TODO comment for future Room/API integration.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T11:50:25.116586324+07:00","created_by":"iwan","updated_at":"2026-01-21T12:03:32.229543481+07:00","closed_at":"2026-01-21T12:03:32.229543481+07:00","close_reason":"Implemented lazy loading pagination: generates 10 items per page, detects scroll near bottom using LazyListState, shows loading indicator, stops at 50 items. Added TODO comments for Room integration.","dependencies":[{"issue_id":"ExternalODK-gd8","depends_on_id":"ExternalODK-0s3","type":"blocks","created_at":"2026-01-21T11:50:33.992416718+07:00","created_by":"iwan"}]}
{"id":"ExternalODK-if7","title":"Initial Download (Parsing)","description":"Fetch form submissions from KoboToolbox API and store in Room database.\n\n## Implementation Tasks\n\n1. Create KoboRepository class\n   - Inject KoboApiService, SubmissionDao, FormMetadataDao\n   - Implement getSubmissions(assetUid: String) suspend function\n\n2. Implement Pagination Loop\n   - Fetch with limit=300 per page\n   - Continue until 'next' is null in response\n   - Handle API errors gracefully\n\n3. Transform DTO to Entity\n   - Extract system fields: _uuid, _id, submissionTime, submittedBy\n   - Parse submissionTime (ISO 8601 string -\u003e Long timestamp)\n   - Store dynamic form fields as rawData JSON string\n   - Map geolocation/tags to systemData if present\n\n4. Save to Database\n   - Use SubmissionDao.insertAll() for batch inserts\n   - Update FormMetadataEntity.lastSyncTimestamp after success\n\n## Existing Components\n- DTOs: KoboSubmissionDto, KoboDataResponse (data/dto/)\n- Entities: SubmissionEntity, FormMetadataEntity (data/entity/)\n- DAOs: SubmissionDao, FormMetadataDao (data/dao/)\n\n## Dependencies\n- Requires networking layer (ExternalODK-qwy) to be completed first","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-22T18:45:07.733347622+07:00","created_by":"iwan","updated_at":"2026-01-22T19:56:41.408002575+07:00","dependencies":[{"issue_id":"ExternalODK-if7","depends_on_id":"ExternalODK-6sy","type":"parent-child","created_at":"2026-01-22T18:51:52.585072816+07:00","created_by":"iwan"},{"issue_id":"ExternalODK-if7","depends_on_id":"ExternalODK-qwy","type":"blocks","created_at":"2026-01-22T22:46:50.644908378+07:00","created_by":"iwan"}]}
{"id":"ExternalODK-pg8","title":"Database Setup (SQLite/Room) \u0026 Serialization","description":"Generic Hybrid Schema for dynamic form support. Strategy: System Columns (indexed for sorting/filtering: _uuid, assetUid, _id, submissionTime, submittedBy) + JSON Blob (rawData stores full dynamic payload). Detail screens parse rawData as key-value pairs for display. Supports ANY form type without schema-specific columns. Based on UI First: UI built with mock data, now implementing actual persistence layer.","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-01-21T15:23:48.190228+07:00","created_by":"iwanfirmawan","updated_at":"2026-01-21T18:29:10.661221+07:00","closed_at":"2026-01-21T18:29:10.661221+07:00","close_reason":"Closed"}
{"id":"ExternalODK-pg8.1","title":"Create database unit tests using data fixtures","description":"Create unit tests for the database layer (Room entities, DAOs, TypeConverters) using data fixtures. Test SubmissionEntity, FormMetadataEntity, SubmissionDao, FormMetadataDao with mock/submission data from fixtures/ directory. Ensure test coverage for CRUD operations, Flow emissions, and JSON serialization/deserialization.","notes":"Created comprehensive unit tests for Room database layer. Tests use Robolectric with in-memory database. Fixtures moved to src/test/resources/fixtures/. Test classes: DatabaseTest (base), SubmissionDaoTest (11 tests using fixtures 123/456), FormMetadataDaoTest (7 tests), ConvertersTest (11 tests). All 35 tests passing.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-21T17:42:19.56232+07:00","created_by":"iwanfirmawan","updated_at":"2026-01-21T18:26:54.274765+07:00","closed_at":"2026-01-21T18:26:54.275197+07:00","dependencies":[{"issue_id":"ExternalODK-pg8.1","depends_on_id":"ExternalODK-pg8","type":"parent-child","created_at":"2026-01-21T17:42:19.577192+07:00","created_by":"iwanfirmawan"}]}
{"id":"ExternalODK-qwy","title":"Networking Layer (Setup)","description":"Setup networking layer with Retrofit and OkHttp for KoboToolbox API.\n\n## Prerequisites\n- Add Retrofit and OkHttp dependencies to build.gradle.kts\n- Add retrofit-kotlinx-serialization-converter\n\n## Implementation Tasks\n1. Create BasicAuthInterceptor (OkHttp Interceptor)\n   - Encode credentials as Base64 user:pass\n   - Add Authorization header to all requests\n\n2. Create KoboApiService Interface\n   - GET /api/v2/assets/{assetUid}/data.json with limit param\n   - Response type: KoboDataResponse\n\n3. Create NetworkModule for Hilt DI\n   - Provide OkHttpClient with BasicAuthInterceptor\n   - Provide Retrofit with kotlinx.serialization converter\n   - Provide KoboApiService\n\n## Notes\n- Base URL: https://kf.kobotoolbox.org\n- Use kotlinx.serialization (already available)\n- DTOs already exist in data/dto/KoboSubmissionDto.kt","notes":"Define KoboApiService Interface.Create Basic Auth Interceptor (Encode user:pass).Configure Retrofit with Kotlinx Serialization.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-22T18:42:15.266820674+07:00","created_by":"iwan","updated_at":"2026-01-22T19:56:28.008782238+07:00","dependencies":[{"issue_id":"ExternalODK-qwy","depends_on_id":"ExternalODK-6sy","type":"parent-child","created_at":"2026-01-22T18:51:05.724054266+07:00","created_by":"iwan"}]}
{"id":"ExternalODK-xb4","title":"WIRING (The Bridge)","description":"Focus: Connecting Generic DB to Generic UI.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-22T18:48:06.005617118+07:00","created_by":"iwan","updated_at":"2026-01-22T18:48:46.153879593+07:00","deleted_at":"2026-01-22T18:48:46.153879593+07:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
