{"id":"ABPlotValidator-xb4","title":"WIRING (The Bridge)","description":"Focus: Connecting Generic DB to Generic UI.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-22T18:48:06.005617118+07:00","created_by":"iwan","updated_at":"2026-01-22T18:48:46.153879593+07:00","deleted_at":"2026-01-22T18:48:46.153879593+07:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"ExternalODK-xb4","title":"WIRING (The Bridge)","description":"Focus: Connecting Generic DB to Generic UI.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-22T18:48:06.005617118+07:00","created_by":"iwan","updated_at":"2026-01-22T18:48:46.153879593+07:00","deleted_at":"2026-01-22T18:48:46.153879593+07:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"afribamodkvalidator-03j","title":"Implement ValidationActivity with ODK intent handling","description":"Create ValidationActivity that: 1) Receives intent with value extra, 2) Parses WKT/ODK polygon format, 3) Returns RESULT_OK/RESULT_CANCELED","status":"closed","priority":1,"issue_type":"task","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-28T10:29:05.430355008+07:00","created_by":"Iwan Firmawan","updated_at":"2026-01-30T17:02:32.212192406+07:00","closed_at":"2026-01-28T11:05:28.237519912+07:00","close_reason":"Implemented PolygonValidationActivity and PolygonValidator with vertex count, area, and self-intersection checks","dependencies":[{"issue_id":"afribamodkvalidator-03j","depends_on_id":"afribamodkvalidator-5x8","type":"blocks","created_at":"2026-01-28T10:57:56.33454395+07:00","created_by":"Iwan Firmawan"}]}
{"id":"afribamodkvalidator-04b","title":"Overlap Detection","description":"Detect plot overlaps using JTS geometry. Includes:\n- PlotEntity and PlotDao (data layer)\n- OverlapChecker with bbox + JTS intersection (5% threshold)\n- Activity integration with intent extras\n- Error message formatting\n\nThreshold: Block overlaps \u003e= 5% of smaller polygon area (not any-overlap).\n\nSee docs/polygon-validation-implementation-plan.md Phase 1-3","status":"closed","priority":1,"issue_type":"epic","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-30T14:42:42.536415745+07:00","created_by":"Iwan Firmawan","updated_at":"2026-02-02T22:41:42.600455382+07:00","closed_at":"2026-02-02T22:41:42.600455382+07:00","close_reason":"Completed: PlotEntity, PlotDao, OverlapChecker (5% threshold), PolygonValidationActivity integration, README documentation"}
{"id":"afribamodkvalidator-0c4","title":"Dynamic Rendering Logic","description":"Wire remaining UI interactions and finalize app.\n\n**Scope** (after ViewModels wiring is complete):\n\n1. **Resync Flow:**\n   - Wire resync FAB → KoboRepository.resync()\n   - Pass (addedCount, updatedCount, latestTimestamp) to SyncCompleteScreen\n\n2. **Logout Flow:**\n   - HomeDashboardScreen line 70: Clear database on logout\n   - Call AuthCredentials.clear()\n   - Clear SubmissionDao + FormMetadataDao\n\n3. **Detail Screen (if needed):**\n   - Parse rawData JSON for key-value display\n   - Dynamic rendering of form fields\n\n4. **Error Handling:**\n   - Show toast/snackbar on API failures\n   - Handle network offline state\n\n**Depends on:** ViewModels wiring (AfriBamODKValidator-3li.1)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-23T00:08:31.176419726+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.232088688+07:00","closed_at":"2026-01-23T00:33:27.078182611+07:00","close_reason":"Completed: 1) Logout flow clears SubmissionDao, FormMetadataDao, AuthCredentials. 2) Error handling shows ErrorScreenContent with retry button. 3) Resync flow works via LoadingViewModel.resync(). Detail screen deferred to future enhancement."}
{"id":"afribamodkvalidator-0kq","title":"Refactor HomeDashboard to ODK Collect UI style","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-23T10:43:20.468204825+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.217740967+07:00","closed_at":"2026-01-23T11:04:10.311583338+07:00","close_reason":"All tasks completed - HomeDashboard refactored to ODK Collect UI style"}
{"id":"afribamodkvalidator-0l1","title":"Sync Integration","description":"Sync plots between local drafts and Kobo submissions. Includes:\n- Match drafts to submissions by instanceName\n- Extract plots from synced rawData (polygon + farmer names)\n- Update isDraft flag on match\n- XLSForm update for intent extras\n\nSee docs/polygon-validation-implementation-plan.md Phase 5-6","status":"closed","priority":2,"issue_type":"epic","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-30T14:52:27.103894309+07:00","created_by":"Iwan Firmawan","updated_at":"2026-02-04T13:26:04.042319306+07:00","closed_at":"2026-02-04T13:26:04.042319306+07:00","close_reason":"All sync integration tasks complete: draft matching, plot extraction with JSON config, and documentation in README.md."}
{"id":"afribamodkvalidator-0od","title":"Match drafts to submissions by instanceName","description":"After sync, link drafts to submissions:\n\n1. After KoboRepository.fetchSubmissions() completes\n2. Query drafts: SELECT * FROM plots WHERE isDraft = 1\n3. For each draft, find submission by instanceName\n4. If match: UPDATE isDraft=0, submissionUuid=submission._uuid\n5. Handle edge cases: no match, multiple matches","status":"closed","priority":2,"issue_type":"task","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-30T15:04:13.742042592+07:00","created_by":"Iwan Firmawan","updated_at":"2026-02-04T11:52:50.195191628+07:00","closed_at":"2026-02-04T11:52:50.195191628+07:00","close_reason":"Implemented draft-to-submission matching in KoboRepository. Added getAllDrafts() to PlotDao, findByInstanceName() to SubmissionDao, and matchDraftsToSubmissions() called after sync.","dependencies":[{"issue_id":"afribamodkvalidator-0od","depends_on_id":"afribamodkvalidator-ejv","type":"blocks","created_at":"2026-01-30T15:09:07.4854222+07:00","created_by":"Iwan Firmawan"}]}
{"id":"afribamodkvalidator-12g","title":"Fix offline map tile source mismatch and UX issues","description":"Critical bugs in offline map feature:\n1. Tile source mismatch: OfflineMapScreen uses 'OSM_Offline' but MapPreviewActivity uses 'Mapnik' - downloaded tiles are not found\n2. No download state tracking - users can't see which regions are already downloaded\n3. Error count not displayed to user (e.g., '48 errors' shown in logs but not UI)\n4. Download button always enabled even after completion (confusing UX)","status":"closed","priority":1,"issue_type":"bug","owner":"firmawaneiwan@gmail.com","created_at":"2026-02-04T14:20:12.523007072+07:00","created_by":"Iwan Firmawan","updated_at":"2026-02-04T14:31:52.559361827+07:00","closed_at":"2026-02-04T14:31:52.559361827+07:00","close_reason":"Fixed tile source mismatch and improved UX: 1) Created shared OfflineTileSource used by both screens, 2) Added download status tracking with DownloadResult, 3) Show tile counts and error details, 4) Button shows Re-download after completion"}
{"id":"afribamodkvalidator-1dl","title":"Navigation \u0026 Scaffold Setup","notes":"Add Hilt \u0026 Kotlinx Serialization plugins. Add Room dependencies","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-21T09:11:22.894451352+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.234979184+07:00","closed_at":"2026-01-21T09:54:40.661745353+07:00","close_reason":"Added Hilt, Kotlinx Serialization, Room, and Navigation dependencies. Created navigation routes and NavHost with 6 screen destinations. Set up MainActivity with navigation scaffold and Hilt Application class.","dependencies":[{"issue_id":"afribamodkvalidator-1dl","depends_on_id":"afribamodkvalidator-g40","type":"parent-child","created_at":"2026-01-21T09:11:22.904273753+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-1fk","title":"Cross-region overlap detection: same geoshape in different regions not detected","description":"## Problem\n\nThe current overlap detection design filters by region first, which means plots with identical or overlapping geoshapes but different region values will NOT be detected as overlaps.\n\n## Current Behavior\n\nThe PlotEntity indices and query design use region-based filtering:\n- Index: (region, minLon) and (region, minLat)\n- Query likely uses WHERE region = :region\n\nThis misses cross-region duplicates:\n| Plot A Region | Plot B Region | Same Geoshape | Detected? |\n|---------------|---------------|---------------|-----------|\n| Woreda-1      | Woreda-1      | Yes           | ✅ Yes    |\n| Woreda-1      | Woreda-2      | Yes           | ❌ No     |\n\n## Failure Scenarios\n\n1. **Wrong region selected** - Farmer accidentally picks wrong woreda/kebele\n2. **Boundary plots** - Plots spanning regional boundaries registered in either region\n3. **Data entry errors** - Typos or incorrect region selection\n4. **Intentional fraud** - Same land registered under different region to bypass detection\n\n## Potential Solutions\n\n1. **Cross-region check** - After bounding box pre-filter, also check nearby/adjacent regions\n2. **Remove region filter** - Rely only on bounding box + JTS geometry (more expensive but complete)\n3. **Two-phase detection** - Fast same-region check + periodic cross-region audit\n4. **Expand search radius** - Use buffer/radius approach to include adjacent regions\n\n## Files Affected\n\n- app/src/main/java/org/akvo/afribamodkvalidator/data/entity/PlotEntity.kt\n- app/src/main/java/org/akvo/afribamodkvalidator/data/dao/PlotDao.kt (findOverlapCandidates query)\n\n## Acceptance Criteria\n\n- [ ] Design decision on which solution approach to use\n- [ ] Implement cross-region overlap detection\n- [ ] Add tests for cross-region overlap scenarios\n- [ ] Document performance implications","design":"## Final Implementation (Simplified)\n\nRegion is just a label - overlap detection is based purely on geoshape similarity.\n\n### Changes Made\n\n**1. PlotDao.kt** - Single query using bbox only:\n```kotlin\n@Query(\"\"\"\n    SELECT * FROM plots\n    WHERE uuid != :excludeUuid\n    AND minLon \u003c= :maxLon AND maxLon \u003e= :minLon\n    AND minLat \u003c= :maxLat AND maxLat \u003e= :minLat\n\"\"\")\nsuspend fun findOverlapCandidates(\n    minLat: Double,\n    maxLat: Double,\n    minLon: Double,\n    maxLon: Double,\n    excludeUuid: String\n): List\u003cPlotEntity\u003e\n```\n\n**2. PlotEntity.kt** - Single-column bbox indexes (removed region-based indexes):\n```kotlin\nindices = [\n    Index(value = [\"minLat\"]),\n    Index(value = [\"maxLat\"]),\n    Index(value = [\"minLon\"]),\n    Index(value = [\"maxLon\"]),\n    Index(value = [\"instanceName\"]),\n    Index(value = [\"submissionUuid\"])\n]\n```\n\n**3. PolygonValidationActivity.kt** - Simplified overlap check:\n```kotlin\nval candidates = plotDao.findOverlapCandidates(\n    minLat = bbox.minLat,\n    maxLat = bbox.maxLat,\n    minLon = bbox.minLon,\n    maxLon = bbox.maxLon,\n    excludeUuid = plotUuid\n)\nval overlaps = overlapChecker.checkOverlaps(polygon, candidates)\n```\n\n**4. Database version bumped to 4** (uses destructive migration during dev)\n\n### Benefits\n- Simpler code, single query path\n- No false negatives from region mismatch\n- Catches fraud attempts (same plot registered with different region)\n- Optimized indexes for range queries","status":"closed","priority":2,"issue_type":"bug","owner":"firmawaneiwan@gmail.com","created_at":"2026-02-03T18:39:26.851055459+07:00","created_by":"Iwan Firmawan","updated_at":"2026-02-03T18:54:35.947776548+07:00","closed_at":"2026-02-03T18:54:35.947776548+07:00","close_reason":"Implemented: simplified overlap detection using bbox only (region is metadata). Updated PlotDao, PlotEntity indexes, PolygonValidationActivity, tests, and documentation."}
{"id":"afribamodkvalidator-1xe","title":"Add eye icon for show/hide password input in LoginScreen","description":"Add a password visibility toggle (eye icon) to the password input field in LoginScreen.kt. When tapped, it should toggle between showing and hiding the password text. This improves UX by allowing users to verify their password input.\n\nFile: app/src/main/java/com/akvo/externalodk/ui/screen/LoginScreen.kt\n\nImplementation:\n- Add passwordVisible state to LoginUiState or local composable state\n- Replace PasswordVisualTransformation with conditional transformation\n- Add trailing icon (eye/eye-off) to the OutlinedTextField\n- Toggle visibility on icon click","status":"closed","priority":0,"issue_type":"epic","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-29T16:29:37.124556769+07:00","created_by":"Iwan Firmawan","updated_at":"2026-01-30T17:02:32.28115876+07:00","closed_at":"2026-01-29T16:34:16.283548203+07:00","close_reason":"Implemented password visibility toggle with eye icon"}
{"id":"afribamodkvalidator-24l","title":"Update XLSForm intent extras","description":"Update Kobo form to pass required extras:\n\nCurrent:\nex:com.akvo.externalodk.VALIDATE_POLYGON(shape=${Open_Area_GeoMapping})\n\nRequired:\nex:com.akvo.externalodk.VALIDATE_POLYGON(\n  shape=${Open_Area_GeoMapping},\n  plot_name=${First_Name} ${Father_s_Name} ${Grandfather_s_Name},\n  woreda=${woreda},\n  kebele=${kebele}\n)\n\nUpdate both validate_polygon_auto and validate_polygon_manual rows.","status":"closed","priority":2,"issue_type":"task","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-30T15:08:33.733829407+07:00","created_by":"Iwan Firmawan","updated_at":"2026-02-04T13:21:55.608844214+07:00","closed_at":"2026-02-04T13:21:55.608844214+07:00","close_reason":"Already documented in README.md (lines 377-412). App supports all intent extras. Actual XLSForm update is done in KoboToolbox web interface."}
{"id":"afribamodkvalidator-2f9","title":"Add onClick callback to SubmissionListItem","description":"Make SubmissionListItem clickable by adding onClick parameter and wrapping content with clickable modifier.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-23T14:12:02.379071375+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.249215675+07:00","closed_at":"2026-01-23T14:20:17.663747004+07:00","close_reason":"Implemented submission detail feature","dependencies":[{"issue_id":"afribamodkvalidator-2f9","depends_on_id":"afribamodkvalidator-tqj","type":"blocks","created_at":"2026-01-23T14:12:14.558681743+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-2so","title":"Add lazy loading pagination to HomeDashboardScreen","description":"Implement pagination with mock data: generate items on demand, detect scroll near bottom, show loading indicator, load 10 items per page with simulated delay. Add TODO comment for future Room/API integration.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T11:50:25.116586324+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.247934708+07:00","closed_at":"2026-01-21T12:03:32.229543481+07:00","close_reason":"Implemented lazy loading pagination: generates 10 items per page, detects scroll near bottom using LazyListState, shows loading indicator, stops at 50 items. Added TODO comments for Room integration.","dependencies":[{"issue_id":"afribamodkvalidator-2so","depends_on_id":"afribamodkvalidator-g40","type":"blocks","created_at":"2026-01-21T11:50:33.992416718+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-3lb","title":"Implement error AlertDialog UI","description":"Create non-cancelable AlertDialog for validation errors. Map errors to specific messages: too few vertices, area too small, lines intersect","status":"closed","priority":1,"issue_type":"task","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-28T10:29:21.851031821+07:00","created_by":"Iwan Firmawan","updated_at":"2026-01-30T17:02:32.23990199+07:00","closed_at":"2026-01-28T11:05:49.53891055+07:00","close_reason":"AlertDialog with setCancelable(false) implemented for all validation errors","dependencies":[{"issue_id":"afribamodkvalidator-3lb","depends_on_id":"afribamodkvalidator-qbe","type":"blocks","created_at":"2026-01-28T10:57:56.403085804+07:00","created_by":"Iwan Firmawan"}]}
{"id":"afribamodkvalidator-3wq","title":"Add Logout button with confirm dialog that all local data will be erased and it cannot be undone in HomeDashboardScreen","description":"Add a Logout option menu to the HomeDashboardScreen TopAppBar/ActionBar. When clicked, show a confirmation AlertDialog warning that all local data will be erased and this action cannot be undone. On confirm, call a placeholder function (TODO: actual data clearing) and navigate back to LoginScreen.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-21T11:27:06.048426664+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.279526036+07:00","closed_at":"2026-01-21T11:45:00.407037628+07:00","close_reason":"Added overflow menu with Logout option, confirmation AlertDialog, and search functionality with SearchView icon in TopAppBar that filters static data immediately.","dependencies":[{"issue_id":"afribamodkvalidator-3wq","depends_on_id":"afribamodkvalidator-g40","type":"blocks","created_at":"2026-01-21T11:32:36.738656007+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-3yn","title":"Update date format to 'Synced on [date] at [time]'","description":"Change submissionTime display format from '2026-01-21 09:30' to 'Synced on Tue, Jan 21, 2026 at 09:30'","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T10:43:46.386996571+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.203830785+07:00","closed_at":"2026-01-23T11:03:54.546728242+07:00","close_reason":"Implemented HomeDashboard ODK Collect UI style refactoring","dependencies":[{"issue_id":"afribamodkvalidator-3yn","depends_on_id":"afribamodkvalidator-0kq","type":"blocks","created_at":"2026-01-23T10:44:04.101246401+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-4h6","title":"API INTEGRATION (Dynamic \u0026 Basic Auth)","description":"Implement KoboToolbox API integration with Basic Auth and dynamic JSON parsing.\n\n## Scope\nConnect the app to KoboToolbox API to fetch form submissions. The database layer (Room) and DTOs are already implemented.\n\n## Child Tasks (in order)\n1. **Networking Layer Setup** (AfriBamODKValidator-qwy) - P1\n   - Add Retrofit/OkHttp dependencies\n   - BasicAuthInterceptor for authentication\n   - KoboApiService interface\n   - NetworkModule for Hilt DI\n\n2. **Initial Download Parsing** (AfriBamODKValidator-if7) - P1\n   - KoboRepository implementation\n   - Pagination with limit=300\n   - DTO to Entity transformation\n   - Batch database inserts\n\n3. **Resync Logic Delta** (AfriBamODKValidator-c22) - P2\n   - Delta sync using lastSyncTimestamp\n   - Fetch only new submissions\n   - Upsert based on _uuid\n\n## Prerequisites Already Done\n- Room database with SubmissionEntity and FormMetadataEntity\n- DAOs with insert, query, and upsert operations\n- DTOs for KoboToolbox API responses\n- Kotlinx Serialization configured\n- Hilt DI infrastructure\n\n## API Reference\n- Base URL: https://kf.kobotoolbox.org\n- Endpoint: /api/v2/assets/{assetUid}/data.json\n- Auth: Basic Auth (Base64 encoded username:password)","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-01-22T18:40:11.427469521+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.234413743+07:00","closed_at":"2026-01-22T23:54:01.783363904+07:00","close_reason":"All child tasks complete: Networking Layer, Initial Download, and Resync Logic implemented. KoboRepository ready for ViewModel integration."}
{"id":"afribamodkvalidator-4ym","title":"API INTEGRATION (Dynamic \u0026 Basic Auth)","description":"Implement KoboToolbox API integration with Basic Auth and dynamic JSON parsing.\n\n## Scope\nConnect the app to KoboToolbox API to fetch form submissions. The database layer (Room) and DTOs are already implemented.\n\n## Child Tasks (in order)\n1. **Networking Layer Setup** (ABPlotValidator-qwy) - P1\n   - Add Retrofit/OkHttp dependencies\n   - BasicAuthInterceptor for authentication\n   - KoboApiService interface\n   - NetworkModule for Hilt DI\n\n2. **Initial Download Parsing** (ABPlotValidator-if7) - P1\n   - KoboRepository implementation\n   - Pagination with limit=300\n   - DTO to Entity transformation\n   - Batch database inserts\n\n3. **Resync Logic Delta** (ABPlotValidator-c22) - P2\n   - Delta sync using lastSyncTimestamp\n   - Fetch only new submissions\n   - Upsert based on _uuid\n\n## Prerequisites Already Done\n- Room database with SubmissionEntity and FormMetadataEntity\n- DAOs with insert, query, and upsert operations\n- DTOs for KoboToolbox API responses\n- Kotlinx Serialization configured\n- Hilt DI infrastructure\n\n## API Reference\n- Base URL: https://kf.kobotoolbox.org\n- Endpoint: /api/v2/assets/{assetUid}/data.json\n- Auth: Basic Auth (Base64 encoded username:password)","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-01-22T18:40:11.427469521+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.216997378+07:00","closed_at":"2026-01-22T23:54:01.783363904+07:00","close_reason":"All child tasks complete: Networking Layer, Initial Download, and Resync Logic implemented. KoboRepository ready for ViewModel integration."}
{"id":"afribamodkvalidator-578","title":"Login Screen (UI)","description":"Build Login Screen with Basic Auth fields","notes":"Compose 'LoginScreen'. Inputs: Username, Password, Server URL, Form ID. Button: Label . Use Mock Data in ViewModel to simulate  -\u003e  flow.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T09:13:11.433750494+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.200557043+07:00","closed_at":"2026-01-21T10:43:24.228573559+07:00","close_reason":"Implemented LoginScreen with 4 OutlinedTextFields (username, password, server URL, form ID), validation logic (button disabled when fields empty), and LoginViewModel with StateFlow. Added 2 previews.","dependencies":[{"issue_id":"afribamodkvalidator-578","depends_on_id":"afribamodkvalidator-8am","type":"parent-child","created_at":"2026-01-21T09:13:11.450943779+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-57i","title":"Create SubmissionDetailViewModel","description":"Create ViewModel to load submission by UUID from database and parse rawData JSON into displayable key-value pairs for the detail screen.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-23T14:12:00.341742601+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.235588979+07:00","closed_at":"2026-01-23T14:20:17.675629247+07:00","close_reason":"Implemented submission detail feature","dependencies":[{"issue_id":"afribamodkvalidator-57i","depends_on_id":"afribamodkvalidator-tqj","type":"blocks","created_at":"2026-01-23T14:12:14.540427214+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-5tp","title":"Create SubmissionDetailScreen UI composable","description":"Create a new screen to display submission details including all form answers. Should show: title/header, submission metadata (date, enumerator), and a list of all answers from rawData parsed as key-value pairs.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-23T14:11:58.345765039+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.280275296+07:00","closed_at":"2026-01-23T14:20:17.67296079+07:00","close_reason":"Implemented submission detail feature","dependencies":[{"issue_id":"afribamodkvalidator-5tp","depends_on_id":"afribamodkvalidator-tqj","type":"blocks","created_at":"2026-01-23T14:12:14.51615213+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-5x8","title":"Configure ValidationActivity in AndroidManifest","description":"Add ValidationActivity with intent filter to handle ODK external app calls. Action should be ex:org.akvo.abplotvalidator.VALIDATE_POLYGON","status":"closed","priority":1,"issue_type":"task","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-28T10:28:53.18007757+07:00","created_by":"Iwan Firmawan","updated_at":"2026-01-30T17:02:32.199144056+07:00","closed_at":"2026-01-28T11:05:20.035496349+07:00","close_reason":"Added ValidationActivity with intent filter for org.akvo.abplotvalidator.VALIDATE_POLYGON","dependencies":[{"issue_id":"afribamodkvalidator-5x8","depends_on_id":"afribamodkvalidator-gcn","type":"blocks","created_at":"2026-01-28T10:57:56.300894597+07:00","created_by":"Iwan Firmawan"}]}
{"id":"afribamodkvalidator-65f","title":"Add instanceName field to data model and UI","description":"Store meta/instanceName in database and use as primary title in list item, fallback to date format when not available","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T10:43:44.044077476+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.278268073+07:00","closed_at":"2026-01-23T11:03:54.537536523+07:00","close_reason":"Implemented HomeDashboard ODK Collect UI style refactoring","dependencies":[{"issue_id":"afribamodkvalidator-65f","depends_on_id":"afribamodkvalidator-wj4","type":"blocks","created_at":"2026-01-23T10:44:04.079100977+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-6a2","title":"Detail \u0026 Result Screens (UI)","description":"Build screens for viewing generic data.","notes":"Screens: LoadingScreen (generic with message param), DownloadCompleteScreen, SyncCompleteScreen","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-21T09:29:04.543089583+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.204436803+07:00","closed_at":"2026-01-21T11:24:56.219201137+07:00","close_reason":"Implemented LoadingScreen with CircularProgressIndicator and 2s mock delay, DownloadCompleteScreen with summary and View/Resync buttons, SyncCompleteScreen with sync stats. Full mock navigation flow working.","dependencies":[{"issue_id":"afribamodkvalidator-6a2","depends_on_id":"afribamodkvalidator-8am","type":"parent-child","created_at":"2026-01-21T09:29:04.560249822+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-6cu","title":"Implement polygon validation logic","description":"Implement validation checks: 1) Vertex count \u003e= 4, 2) Area \u003e MIN_AREA threshold with geodetic conversion, 3) Self-intersection check using JTS isValid","status":"closed","priority":1,"issue_type":"task","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-28T10:29:12.413598378+07:00","created_by":"Iwan Firmawan","updated_at":"2026-01-30T17:02:32.21553069+07:00","closed_at":"2026-01-28T11:05:28.24471772+07:00","close_reason":"Implemented PolygonValidationActivity and PolygonValidator with vertex count, area, and self-intersection checks","dependencies":[{"issue_id":"afribamodkvalidator-6cu","depends_on_id":"afribamodkvalidator-03j","type":"blocks","created_at":"2026-01-28T10:57:56.368794844+07:00","created_by":"Iwan Firmawan"}]}
{"id":"afribamodkvalidator-6u6","title":"Create database unit tests using data fixtures","description":"Create unit tests for the database layer (Room entities, DAOs, TypeConverters) using data fixtures. Test SubmissionEntity, FormMetadataEntity, SubmissionDao, FormMetadataDao with mock/submission data from fixtures/ directory. Ensure test coverage for CRUD operations, Flow emissions, and JSON serialization/deserialization.","notes":"Created comprehensive unit tests for Room database layer. Tests use Robolectric with in-memory database. Fixtures moved to src/test/resources/fixtures/. Test classes: DatabaseTest (base), SubmissionDaoTest (11 tests using fixtures 123/456), FormMetadataDaoTest (7 tests), ConvertersTest (11 tests). All 35 tests passing.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-21T17:42:19.56232+07:00","created_by":"iwanfirmawan","updated_at":"2026-01-30T17:02:32.246680221+07:00","closed_at":"2026-01-21T18:26:54.275197+07:00","dependencies":[{"issue_id":"afribamodkvalidator-6u6","depends_on_id":"afribamodkvalidator-z09","type":"parent-child","created_at":"2026-01-21T17:42:19.577192+07:00","created_by":"iwanfirmawan"}]}
{"id":"afribamodkvalidator-7sg","title":"Integrate OSMDroid for map visualization","description":"Add Mapbox Maps SDK to project:\n\n1. Add dependency: com.mapbox.maps:android:11.x.x\n2. Configure Mapbox access token\n3. Create basic MapActivity with satellite style\n4. Test map loads correctly","status":"closed","priority":1,"issue_type":"task","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-30T15:03:51.436398893+07:00","created_by":"Iwan Firmawan","updated_at":"2026-02-03T13:35:22.26331394+07:00","closed_at":"2026-02-03T13:35:22.26331394+07:00","close_reason":"Implemented with OSMDroid instead of Mapbox - simpler, no API key required"}
{"id":"afribamodkvalidator-8am","title":"UI \u0026 Navigation logic based on docs/ui-and-navigation-logic.md","notes":"Visualizing the App using Mock Data reflecting the Generic Schema","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-01-21T08:56:19.487705943+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.203143833+07:00","closed_at":"2026-01-21T15:21:39.360286+07:00"}
{"id":"afribamodkvalidator-8cp","title":"Database Setup (SQLite/Room) \u0026 Serialization","description":"Generic Hybrid Schema for dynamic form support. Strategy: System Columns (indexed for sorting/filtering: _uuid, assetUid, _id, submissionTime, submittedBy) + JSON Blob (rawData stores full dynamic payload). Detail screens parse rawData as key-value pairs for display. Supports ANY form type without schema-specific columns. Based on UI First: UI built with mock data, now implementing actual persistence layer.","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-01-21T15:23:48.190228+07:00","created_by":"iwanfirmawan","updated_at":"2026-01-30T17:02:32.201875701+07:00","closed_at":"2026-01-21T18:29:10.661221+07:00","close_reason":"Closed"}
{"id":"afribamodkvalidator-8lt","title":"Extract plots from synced rawData","description":"Create plots from downloaded submissions:\n\n1. Parse rawData JSON for polygon fields:\n   - Open_Area_GeoMapping (geotrace)\n   - manual_boundary (geoshape)\n2. Extract farmer name: First_Name, Father_s_Name, Grandfather_s_Name\n3. Convert to WKT, compute bbox\n4. Insert as isDraft=false with submissionUuid\n5. Skip if plot already exists","status":"closed","priority":2,"issue_type":"task","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-30T15:08:31.847171903+07:00","created_by":"Iwan Firmawan","updated_at":"2026-02-04T12:09:15.654056352+07:00","closed_at":"2026-02-04T12:09:15.654056352+07:00","close_reason":"Implemented PlotExtractor with JSON config. Parses polygon, farmer name, region from rawData. Config in assets/plot_extraction_config.json.","dependencies":[{"issue_id":"afribamodkvalidator-8lt","depends_on_id":"afribamodkvalidator-ejv","type":"blocks","created_at":"2026-01-30T15:09:10.495321044+07:00","created_by":"Iwan Firmawan"}]}
{"id":"afribamodkvalidator-9ax","title":"Add sorting feature with bottom sheet","description":"Add sort icon in toolbar, show bottom sheet with options: Name A-Z, Name Z-A, Date newest first, Date oldest first","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T10:43:50.320577405+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.209658245+07:00","closed_at":"2026-01-23T11:03:54.5517784+07:00","close_reason":"Implemented HomeDashboard ODK Collect UI style refactoring","dependencies":[{"issue_id":"afribamodkvalidator-9ax","depends_on_id":"afribamodkvalidator-0kq","type":"blocks","created_at":"2026-01-23T10:44:04.134382088+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-9wa","title":"Initial Download (Parsing)","description":"Fetch form submissions from KoboToolbox API and store in Room database.\n\n## Implementation Tasks\n\n1. Create KoboRepository class\n   - Inject KoboApiService, SubmissionDao, FormMetadataDao\n   - Implement getSubmissions(assetUid: String) suspend function\n\n2. Implement Pagination Loop\n   - Fetch with limit=300 per page\n   - Continue until 'next' is null in response\n   - Handle API errors gracefully\n\n3. Transform DTO to Entity\n   - Extract system fields: _uuid, _id, submissionTime, submittedBy\n   - Parse submissionTime (ISO 8601 string -\u003e Long timestamp)\n   - Store dynamic form fields as rawData JSON string\n   - Map geolocation/tags to systemData if present\n\n4. Save to Database\n   - Use SubmissionDao.insertAll() for batch inserts\n   - Update FormMetadataEntity.lastSyncTimestamp after success\n\n## Existing Components\n- DTOs: KoboSubmissionDto, KoboDataResponse (data/dto/)\n- Entities: SubmissionEntity, FormMetadataEntity (data/entity/)\n- DAOs: SubmissionDao, FormMetadataDao (data/dao/)\n\n## Dependencies\n- Requires networking layer (AfriBamODKValidator-qwy) to be completed first","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T18:45:07.733347622+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.233809418+07:00","closed_at":"2026-01-22T23:37:32.534699188+07:00","close_reason":"Implemented KoboRepository with pagination, DTO to Entity transformation, and date parsing. Added core library desugaring for java.time support on API 24+.","dependencies":[{"issue_id":"afribamodkvalidator-9wa","depends_on_id":"afribamodkvalidator-4h6","type":"parent-child","created_at":"2026-01-22T18:51:52.585072816+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-a00","title":"Create PlotEntity with bbox columns","description":"Create Room entity for plot storage:\n\nFields:\n- uuid (PK)\n- plotName (farmer full name)\n- instanceName (for draft matching)\n- polygonWkt (WKT format)\n- minLat, maxLat, minLon, maxLon (bounding box)\n- isDraft (boolean, default true)\n- formId, region, subRegion\n- createdAt, submissionUuid (nullable)\n\nAdd indices for region and bbox columns.","status":"closed","priority":1,"issue_type":"task","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-30T14:54:03.945750284+07:00","created_by":"Iwan Firmawan","updated_at":"2026-02-02T22:12:00.257094956+07:00","closed_at":"2026-02-02T22:12:00.257094956+07:00","close_reason":"Closed"}
{"id":"afribamodkvalidator-b02","title":"Dashboard \u0026 List (UI)","description":"Build Home Screen using ONLY System Fields (submittedBy, time).","notes":"Compose 'HomeDashboardScreen' with LazyColumn. Create 'SubmissionListItem' showing:\n- submittedBy (e.g., ifirmawan)\n- submissionTime (Formatted Date)\n- Status Badge (Synced). Note: DO NOT attempt to display dynamic fields (like region) yet.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-21T09:15:50.391608642+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.237439074+07:00","closed_at":"2026-01-21T11:11:06.940272895+07:00","close_reason":"Implemented HomeDashboardScreen with LazyColumn, SubmissionListItem component with StatusBadge, HomeViewModel with mock data, and FAB for resync.","dependencies":[{"issue_id":"afribamodkvalidator-b02","depends_on_id":"afribamodkvalidator-g40","type":"parent-child","created_at":"2026-01-21T09:15:50.408757023+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-bo4","title":"Networking Layer (Setup)","description":"Setup networking layer with Retrofit and OkHttp for KoboToolbox API.\n\n## Prerequisites\n- Add Retrofit and OkHttp dependencies to build.gradle.kts\n- Add retrofit-kotlinx-serialization-converter\n\n## Implementation Tasks\n1. Create BasicAuthInterceptor (OkHttp Interceptor)\n   - Encode credentials as Base64 user:pass\n   - Add Authorization header to all requests\n\n2. Create KoboApiService Interface\n   - GET /api/v2/assets/{assetUid}/data.json with limit param\n   - Response type: KoboDataResponse\n\n3. Create NetworkModule for Hilt DI\n   - Provide OkHttpClient with BasicAuthInterceptor\n   - Provide Retrofit with kotlinx.serialization converter\n   - Provide KoboApiService\n\n## Notes\n- Base URL: https://kf.kobotoolbox.org\n- Use kotlinx.serialization (already available)\n- DTOs already exist in data/dto/KoboSubmissionDto.kt","notes":"Define KoboApiService Interface.Create Basic Auth Interceptor (Encode user:pass).Configure Retrofit with Kotlinx Serialization.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T18:42:15.266820674+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.245256034+07:00","closed_at":"2026-01-22T23:18:16.210180909+07:00","close_reason":"Implemented networking layer with Retrofit, OkHttp, BasicAuthInterceptor, KoboApiService, and NetworkModule for Hilt DI","dependencies":[{"issue_id":"afribamodkvalidator-bo4","depends_on_id":"afribamodkvalidator-f60","type":"parent-child","created_at":"2026-01-22T18:51:05.724054266+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-bt1","title":"Map Visualization","description":"MVP Required: Display overlaps on satellite map. Includes:\n- Mapbox SDK integration\n- Current plot (blue) + overlapping plots (red)\n- Bottom sheet with plotName on tap\n- Offline satellite imagery by woreda\n\nSee docs/polygon-validation-implementation-plan.md Phase 4","status":"closed","priority":1,"issue_type":"epic","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-30T14:52:23.842592367+07:00","created_by":"Iwan Firmawan","updated_at":"2026-02-03T18:21:37.690337362+07:00","closed_at":"2026-02-03T18:21:37.690337362+07:00","close_reason":"Implemented with OSMDroid: polygon visualization (blue/red), tap to identify, offline tile downloads by region with JSON config, View on Map button in overlap errors"}
{"id":"afribamodkvalidator-c0n","title":"Login Screen (UI)","description":"Build Login Screen with Basic Auth fields","notes":"Compose 'LoginScreen'. Inputs: Username, Password, Server URL, Form ID. Button: Label . Use Mock Data in ViewModel to simulate  -\u003e  flow.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T09:13:11.433750494+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.241699205+07:00","closed_at":"2026-01-21T10:43:24.228573559+07:00","close_reason":"Implemented LoginScreen with 4 OutlinedTextFields (username, password, server URL, form ID), validation logic (button disabled when fields empty), and LoginViewModel with StateFlow. Added 2 previews.","dependencies":[{"issue_id":"afribamodkvalidator-c0n","depends_on_id":"afribamodkvalidator-g40","type":"parent-child","created_at":"2026-01-21T09:13:11.450943779+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-c41","title":"Write unit tests for polygon validation","description":"Test scenarios: A) Small polygon, B) Self-intersecting bowtie, C) Too few vertices, D) Valid polygon happy path","status":"closed","priority":2,"issue_type":"task","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-28T10:29:23.653397958+07:00","created_by":"Iwan Firmawan","updated_at":"2026-01-30T17:02:32.19517149+07:00","closed_at":"2026-01-28T11:10:42.975305086+07:00","close_reason":"Unit tests for all validation scenarios: valid polygon, too few vertices, area too small, self-intersecting","dependencies":[{"issue_id":"afribamodkvalidator-c41","depends_on_id":"afribamodkvalidator-6cu","type":"blocks","created_at":"2026-01-28T10:57:56.438588082+07:00","created_by":"Iwan Firmawan"}]}
{"id":"afribamodkvalidator-ce1","title":"Setup navigation to SubmissionDetailScreen","description":"Add navigation route for detail screen, pass submission UUID as argument, and wire up navigation from HomeDashboard when item is clicked.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-23T14:12:04.874060315+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.236184658+07:00","closed_at":"2026-01-23T14:20:17.678699801+07:00","close_reason":"Implemented submission detail feature","dependencies":[{"issue_id":"afribamodkvalidator-ce1","depends_on_id":"afribamodkvalidator-tqj","type":"blocks","created_at":"2026-01-23T14:12:14.57656911+07:00","created_by":"iwan"},{"issue_id":"afribamodkvalidator-ce1","depends_on_id":"afribamodkvalidator-5tp","type":"blocks","created_at":"2026-01-23T14:12:16.592636347+07:00","created_by":"iwan"},{"issue_id":"afribamodkvalidator-ce1","depends_on_id":"afribamodkvalidator-2f9","type":"blocks","created_at":"2026-01-23T14:12:16.617506995+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-cgi","title":"Resync Logic (Delta)","description":"Implement delta sync to fetch only new/updated submissions since last sync.\n\n## Implementation Tasks\n\n1. Extend KoboRepository with resync functionality\n   - Implement resync(assetUid: String) suspend function\n   - Get lastSyncTimestamp from FormMetadataEntity\n   - Add query parameter: submissionTime__gt=lastSyncTimestamp\n\n2. Handle Delta Response\n   - Fetch submissions where submissionTime \u003e lastSyncTimestamp\n   - Transform to entities (same as initial download)\n   - Perform upsert based on _uuid (ON CONFLICT REPLACE)\n\n3. Update Sync State\n   - After successful sync, update FormMetadataEntity.lastSyncTimestamp\n   - Use latest submission's timestamp for next delta\n\n## Database Support (Already Implemented)\n- FormMetadataEntity has lastSyncTimestamp field\n- SubmissionDao.insertAll uses ON CONFLICT REPLACE strategy\n- FormMetadataDao.insertOrUpdate handles upsert\n\n## Dependencies\n- Requires Initial Download (ABPlotValidator-if7) to be completed first","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T18:46:54.112561034+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.202520483+07:00","closed_at":"2026-01-22T23:46:45.254692499+07:00","close_reason":"Implemented resync function with delta sync using lastSyncTimestamp. Falls back to full fetch if no previous sync exists.","dependencies":[{"issue_id":"afribamodkvalidator-cgi","depends_on_id":"afribamodkvalidator-4ym","type":"parent-child","created_at":"2026-01-22T18:52:14.438927229+07:00","created_by":"iwan"},{"issue_id":"afribamodkvalidator-cgi","depends_on_id":"afribamodkvalidator-pqs","type":"blocks","created_at":"2026-01-22T22:46:53.763331212+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-ch9","title":"Initial Download (Parsing)","description":"Fetch form submissions from KoboToolbox API and store in Room database.\n\n## Implementation Tasks\n\n1. Create KoboRepository class\n   - Inject KoboApiService, SubmissionDao, FormMetadataDao\n   - Implement getSubmissions(assetUid: String) suspend function\n\n2. Implement Pagination Loop\n   - Fetch with limit=300 per page\n   - Continue until 'next' is null in response\n   - Handle API errors gracefully\n\n3. Transform DTO to Entity\n   - Extract system fields: _uuid, _id, submissionTime, submittedBy\n   - Parse submissionTime (ISO 8601 string -\u003e Long timestamp)\n   - Store dynamic form fields as rawData JSON string\n   - Map geolocation/tags to systemData if present\n\n4. Save to Database\n   - Use SubmissionDao.insertAll() for batch inserts\n   - Update FormMetadataEntity.lastSyncTimestamp after success\n\n## Existing Components\n- DTOs: KoboSubmissionDto, KoboDataResponse (data/dto/)\n- Entities: SubmissionEntity, FormMetadataEntity (data/entity/)\n- DAOs: SubmissionDao, FormMetadataDao (data/dao/)\n\n## Dependencies\n- Requires networking layer (ExternalODK-qwy) to be completed first","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T18:45:07.733347622+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.24312153+07:00","closed_at":"2026-01-22T23:37:32.534699188+07:00","close_reason":"Implemented KoboRepository with pagination, DTO to Entity transformation, and date parsing. Added core library desugaring for java.time support on API 24+.","dependencies":[{"issue_id":"afribamodkvalidator-ch9","depends_on_id":"afribamodkvalidator-f60","type":"parent-child","created_at":"2026-01-22T18:51:52.585072816+07:00","created_by":"iwan"},{"issue_id":"afribamodkvalidator-ch9","depends_on_id":"afribamodkvalidator-bo4","type":"blocks","created_at":"2026-01-22T22:46:50.644908378+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-col","title":"Update PolygonValidationActivity for overlap detection","description":"Update activity to check overlaps:\n\n1. Add Hilt injection (@AndroidEntryPoint)\n2. Inject PlotDao and OverlapChecker\n3. Parse new intent extras: plot_name, region, sub_region, form_id, instance_name\n4. After single-polygon validation passes:\n   - Compute bbox\n   - Query candidates from PlotDao\n   - Check overlaps with OverlapChecker (5% threshold)\n5. If overlap \u003e= 5%: show error with plotName\n6. If no significant overlap: save draft plot, return success\n\nError format: \"New plot for \u003cplotName\u003e overlaps with plot for \u003cplotName\u003e\"","status":"closed","priority":1,"issue_type":"task","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-30T15:02:56.011245195+07:00","created_by":"Iwan Firmawan","updated_at":"2026-02-02T22:35:11.00102271+07:00","closed_at":"2026-02-02T22:35:11.00102271+07:00","close_reason":"Closed","dependencies":[{"issue_id":"afribamodkvalidator-col","depends_on_id":"afribamodkvalidator-ejv","type":"blocks","created_at":"2026-01-30T15:08:56.173314933+07:00","created_by":"Iwan Firmawan"},{"issue_id":"afribamodkvalidator-col","depends_on_id":"afribamodkvalidator-e10","type":"blocks","created_at":"2026-01-30T15:08:59.253690297+07:00","created_by":"Iwan Firmawan"}]}
{"id":"afribamodkvalidator-cvn","title":"Basic Polygon Validation for ODK External Apps","description":"Implement polygon validation as an ODK external app using JTS Topology Suite. Validates: vertex count, minimum area, and self-intersection checks. Returns RESULT_OK on success, blocks with AlertDialog on failure.","status":"closed","priority":1,"issue_type":"epic","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-28T10:28:22.71561694+07:00","created_by":"Iwan Firmawan","updated_at":"2026-01-30T17:02:32.207067777+07:00","closed_at":"2026-01-28T11:10:47.015112303+07:00","close_reason":"Basic polygon validation feature complete with all checks and tests"}
{"id":"afribamodkvalidator-d59","title":"Resync Logic (Delta)","description":"Implement delta sync to fetch only new/updated submissions since last sync.\n\n## Implementation Tasks\n\n1. Extend KoboRepository with resync functionality\n   - Implement resync(assetUid: String) suspend function\n   - Get lastSyncTimestamp from FormMetadataEntity\n   - Add query parameter: submissionTime__gt=lastSyncTimestamp\n\n2. Handle Delta Response\n   - Fetch submissions where submissionTime \u003e lastSyncTimestamp\n   - Transform to entities (same as initial download)\n   - Perform upsert based on _uuid (ON CONFLICT REPLACE)\n\n3. Update Sync State\n   - After successful sync, update FormMetadataEntity.lastSyncTimestamp\n   - Use latest submission's timestamp for next delta\n\n## Database Support (Already Implemented)\n- FormMetadataEntity has lastSyncTimestamp field\n- SubmissionDao.insertAll uses ON CONFLICT REPLACE strategy\n- FormMetadataDao.insertOrUpdate handles upsert\n\n## Dependencies\n- Requires Initial Download (ExternalODK-if7) to be completed first","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T18:46:54.112561034+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.252822568+07:00","closed_at":"2026-01-22T23:46:45.254692499+07:00","close_reason":"Implemented resync function with delta sync using lastSyncTimestamp. Falls back to full fetch if no previous sync exists.","dependencies":[{"issue_id":"afribamodkvalidator-d59","depends_on_id":"afribamodkvalidator-f60","type":"parent-child","created_at":"2026-01-22T18:52:14.438927229+07:00","created_by":"iwan"},{"issue_id":"afribamodkvalidator-d59","depends_on_id":"afribamodkvalidator-ch9","type":"blocks","created_at":"2026-01-22T22:46:53.763331212+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-diz","title":"WIRING (The Bridge)","description":"Focus: Connecting existing Generic DB to Generic UI.\n\n**Current State:**\n- Room database (SubmissionEntity, FormMetadataEntity) ✅ Complete\n- DAOs (SubmissionDao, FormMetadataDao) ✅ Complete  \n- KoboRepository with delta sync ✅ Complete\n- API layer (Retrofit/OkHttp) ✅ Complete\n- ViewModels exist but use mock data\n- UI screens complete but hardcoded nav params\n\n**Remaining Work:**\n1. Wire LoginViewModel → KoboRepository.fetchSubmissions()\n2. Wire HomeViewModel → SubmissionDao.getSubmissions() Flow\n3. Pass real API results through navigation params\n4. Wire logout to clear database","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-01-23T00:03:43.60886426+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.259954529+07:00","closed_at":"2026-01-23T00:33:58.489190254+07:00","close_reason":"All wiring complete: LoginViewModel → AuthCredentials → LoadingViewModel → KoboRepository → Room DB → HomeViewModel (Flow). Navigation passes real API results. Logout clears all data."}
{"id":"afribamodkvalidator-dp2","title":"Configure ValidationActivity in AndroidManifest","description":"Add ValidationActivity with intent filter to handle ODK external app calls. Action should be ex:com.akvo.externalodk.VALIDATE_POLYGON","status":"closed","priority":1,"issue_type":"task","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-28T10:28:53.18007757+07:00","created_by":"Iwan Firmawan","updated_at":"2026-01-30T17:02:32.249887818+07:00","closed_at":"2026-01-28T11:05:20.035496349+07:00","close_reason":"Added ValidationActivity with intent filter for com.akvo.externalodk.VALIDATE_POLYGON","dependencies":[{"issue_id":"afribamodkvalidator-dp2","depends_on_id":"afribamodkvalidator-j7c","type":"blocks","created_at":"2026-01-28T10:57:56.300894597+07:00","created_by":"Iwan Firmawan"}]}
{"id":"afribamodkvalidator-dqn","title":"Display polygons on satellite map","description":"Show current and overlapping polygons on map:\n\n1. Parse WKT to Mapbox polygon\n2. Current plot: blue fill with stroke\n3. Overlapping plots: red fill, semi-transparent\n4. Center map on current polygon bounds\n5. Make overlapping polygons tappable","status":"closed","priority":1,"issue_type":"task","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-30T15:03:54.004938761+07:00","created_by":"Iwan Firmawan","updated_at":"2026-02-03T13:35:50.371491446+07:00","closed_at":"2026-02-03T13:35:50.371491446+07:00","close_reason":"Implemented in MapPreviewActivity: WKT parsing, blue current/red overlapping polygons, auto-center, tap shows plotName","dependencies":[{"issue_id":"afribamodkvalidator-dqn","depends_on_id":"afribamodkvalidator-7sg","type":"blocks","created_at":"2026-01-30T15:09:01.214322036+07:00","created_by":"Iwan Firmawan"}]}
{"id":"afribamodkvalidator-dya","title":"Session Persistence - Keep user logged in after app restart","description":"**Problem:**\nAuthCredentials is an in-memory singleton that loses data when app is killed. AppNavHost always starts at Login screen regardless of previous session state.\n\n**Current Behavior:**\n1. User logs in successfully\n2. Data downloads to Room database\n3. User closes app\n4. App reopens → Shows LoginScreen again (data still in DB but no session)\n\n**Root Cause:**\n- AuthCredentials (data/network/AuthCredentials.kt) stores credentials in volatile memory only\n- AppNavHost (navigation/AppNavHost.kt) hardcodes `startDestination = Login`\n- No persistent storage for session state\n\n**Solution:**\n1. **Persist credentials** using EncryptedSharedPreferences or DataStore:\n   - Store: username, password (encrypted), serverUrl, assetUid\n   - Load on app startup into AuthCredentials singleton\n\n2. **Dynamic start destination** in AppNavHost:\n   - Check if credentials exist in persistent storage\n   - If yes → start at Home\n   - If no → start at Login\n\n3. **Update logout flow:**\n   - Clear both in-memory AuthCredentials AND persistent storage\n\n**Files to modify:**\n- data/network/AuthCredentials.kt - Add persistence layer\n- navigation/AppNavHost.kt - Dynamic start destination\n- ui/viewmodel/HomeViewModel.kt - Ensure logout clears persistent storage\n- di/NetworkModule.kt or new SessionModule.kt - Provide DataStore/SharedPreferences\n\n**Security consideration:**\nUse EncryptedSharedPreferences for storing password securely.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-23T00:58:32.889612807+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.262030232+07:00","closed_at":"2026-01-23T01:09:02.536923773+07:00","close_reason":"Implemented session persistence using EncryptedSharedPreferences. SessionManager stores credentials securely, AuthCredentials loads on init and persists on set/clear, AppNavHost uses dynamic startDestination based on login state."}
{"id":"afribamodkvalidator-e10","title":"Implement OverlapChecker with JTS","description":"Create OverlapChecker class:\n\n- computeBoundingBox(polygon: Polygon): BoundingBox\n- checkOverlaps(newPolygon, candidates: List\u003cPlotEntity\u003e): List\u003cOverlapResult\u003e\n- Use JTS intersection() to compute overlap area\n- Calculate overlap percentage: overlapArea / min(newPolygonArea, candidateArea) * 100\n- Only return results where overlapPercentage \u003e= 5%\n\nOverlapResult contains: uuid, plotName, overlappingPolygon, overlapPercentage: Double\n\nReuse existing JTS setup from PolygonValidator.","status":"closed","priority":1,"issue_type":"task","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-30T15:02:53.232455092+07:00","created_by":"Iwan Firmawan","updated_at":"2026-02-02T22:23:47.826362775+07:00","closed_at":"2026-02-02T22:23:47.826362775+07:00","close_reason":"Closed"}
{"id":"afribamodkvalidator-e88","title":"Database Setup \u0026 Entities","description":"Define the offline storage schema.","notes":"Implemented Generic Hybrid Schema with Room: SubmissionEntity (system columns + rawData JSON blob), FormMetadataEntity (sync tracking), SubmissionDao (CRUD queries), FormMetadataDao, AppDatabase with TypeConverters, Hilt DatabaseModule, and Kotlinx Serialization DTOs (KoboSubmissionDto, KoboDataResponse). Build verified successful.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-21T15:28:42.677016+07:00","created_by":"iwanfirmawan","updated_at":"2026-01-30T17:02:32.214851563+07:00","closed_at":"2026-01-21T16:27:06.848847+07:00","dependencies":[{"issue_id":"afribamodkvalidator-e88","depends_on_id":"afribamodkvalidator-8cp","type":"parent-child","created_at":"2026-01-21T15:35:59.586337+07:00","created_by":"iwanfirmawan"}]}
{"id":"afribamodkvalidator-ejv","title":"Create PlotDao with proximity query","description":"Create Room DAO for plot operations:\n\nQueries:\n- insertOrUpdate(plot)\n- findOverlapCandidates(region, minLat, maxLat, minLon, maxLon, excludeUuid)\n- findByInstanceName(instanceName)\n- updateDraftStatus(instanceName, submissionUuid)\n- getAll(), getByFormId()\n\nUpdate AppDatabase to version 3, add to DatabaseModule.","status":"closed","priority":1,"issue_type":"task","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-30T15:00:35.981368554+07:00","created_by":"Iwan Firmawan","updated_at":"2026-02-02T22:18:06.8699764+07:00","closed_at":"2026-02-02T22:18:06.8699764+07:00","close_reason":"Closed","dependencies":[{"issue_id":"afribamodkvalidator-ejv","depends_on_id":"afribamodkvalidator-a00","type":"blocks","created_at":"2026-01-30T15:08:52.688613394+07:00","created_by":"Iwan Firmawan"}]}
{"id":"afribamodkvalidator-es2","title":"Add form icon to submission list item","description":"Add document/form icon on the left side of each submission list item, similar to ODK Collect UI","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T10:43:47.896434431+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.273919575+07:00","closed_at":"2026-01-23T11:03:54.549300979+07:00","close_reason":"Implemented HomeDashboard ODK Collect UI style refactoring","dependencies":[{"issue_id":"afribamodkvalidator-es2","depends_on_id":"afribamodkvalidator-wj4","type":"blocks","created_at":"2026-01-23T10:44:04.117166775+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-f60","title":"API INTEGRATION (Dynamic \u0026 Basic Auth)","description":"Implement KoboToolbox API integration with Basic Auth and dynamic JSON parsing.\n\n## Scope\nConnect the app to KoboToolbox API to fetch form submissions. The database layer (Room) and DTOs are already implemented.\n\n## Child Tasks (in order)\n1. **Networking Layer Setup** (ExternalODK-qwy) - P1\n   - Add Retrofit/OkHttp dependencies\n   - BasicAuthInterceptor for authentication\n   - KoboApiService interface\n   - NetworkModule for Hilt DI\n\n2. **Initial Download Parsing** (ExternalODK-if7) - P1\n   - KoboRepository implementation\n   - Pagination with limit=300\n   - DTO to Entity transformation\n   - Batch database inserts\n\n3. **Resync Logic Delta** (ExternalODK-c22) - P2\n   - Delta sync using lastSyncTimestamp\n   - Fetch only new submissions\n   - Upsert based on _uuid\n\n## Prerequisites Already Done\n- Room database with SubmissionEntity and FormMetadataEntity\n- DAOs with insert, query, and upsert operations\n- DTOs for KoboToolbox API responses\n- Kotlinx Serialization configured\n- Hilt DI infrastructure\n\n## API Reference\n- Base URL: https://kf.kobotoolbox.org\n- Endpoint: /api/v2/assets/{assetUid}/data.json\n- Auth: Basic Auth (Base64 encoded username:password)","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-01-22T18:40:11.427469521+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.274821915+07:00","closed_at":"2026-01-22T23:54:01.783363904+07:00","close_reason":"All child tasks complete: Networking Layer, Initial Download, and Resync Logic implemented. KoboRepository ready for ViewModel integration."}
{"id":"afribamodkvalidator-ftk","title":"ViewModels \u0026 Data Exposure","description":"Wire existing ViewModels to real data sources (replace mocks).\n\n**LoginViewModel** (ui/viewmodel/LoginViewModel.kt):\n- ✅ Form state management works\n- ❌ startLoginAndDownloadProcess() is stubbed (line 47)\n- TODO: Call AuthCredentials.set() + KoboRepository.fetchSubmissions()\n- TODO: Return real (totalEntries, latestDate) for navigation\n\n**HomeViewModel** (ui/viewmodel/HomeViewModel.kt):  \n- ✅ Search/pagination UI logic works\n- ❌ loadMore() uses mock data (line 63-64)\n- ❌ filterSubmissions() uses mock data (line 114)\n- TODO: Replace with SubmissionDao.getSubmissions() Flow\n- TODO: Expose _uuid and submittedBy from SubmissionEntity\n\n**Navigation Params:**\n- DownloadCompleteScreen has hardcoded totalEntries=42\n- SyncCompleteScreen has hardcoded added=5, updated=3\n- Wire real counts from repository results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-23T00:05:40.910133568+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.26057256+07:00","closed_at":"2026-01-23T00:28:38.221561256+07:00","close_reason":"Wired ViewModels to real data: LoginViewModel sets AuthCredentials, LoadingViewModel performs API calls via KoboRepository, HomeViewModel observes SubmissionDao Flow. Navigation passes real API results.","dependencies":[{"issue_id":"afribamodkvalidator-ftk","depends_on_id":"afribamodkvalidator-diz","type":"parent-child","created_at":"2026-01-23T00:05:40.924185572+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-g40","title":"UI \u0026 Navigation logic based on docs/ui-and-navigation-logic.md","notes":"Visualizing the App using Mock Data reflecting the Generic Schema","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-01-21T08:56:19.487705943+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.251919367+07:00","closed_at":"2026-01-21T15:21:39.360286+07:00"}
{"id":"afribamodkvalidator-gcn","title":"Add JTS Topology Suite dependency","description":"Add org.locationtech.jts:jts-core to build.gradle for geometry validation","status":"closed","priority":1,"issue_type":"task","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-28T10:28:42.394518876+07:00","created_by":"Iwan Firmawan","updated_at":"2026-01-30T17:02:32.199898896+07:00","closed_at":"2026-01-28T11:02:14.813114356+07:00","close_reason":"Added JTS 1.19.0 to libs.versions.toml and build.gradle.kts"}
{"id":"afribamodkvalidator-gg4","title":"Basic Polygon Validation for ODK External Apps","description":"Implement polygon validation as an ODK external app using JTS Topology Suite. Validates: vertex count, minimum area, and self-intersection checks. Returns RESULT_OK on success, blocks with AlertDialog on failure.","status":"closed","priority":1,"issue_type":"epic","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-28T10:28:22.71561694+07:00","created_by":"Iwan Firmawan","updated_at":"2026-01-30T17:02:32.250581112+07:00","closed_at":"2026-01-28T11:10:47.015112303+07:00","close_reason":"Basic polygon validation feature complete with all checks and tests"}
{"id":"afribamodkvalidator-gjs","title":"Configure ValidationActivity in AndroidManifest","description":"Add ValidationActivity with intent filter to handle ODK external app calls. Action should be ex:org.akvo.afribamodkvalidator.VALIDATE_POLYGON","status":"closed","priority":1,"issue_type":"task","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-28T10:28:53.18007757+07:00","created_by":"Iwan Firmawan","updated_at":"2026-01-30T17:02:32.233271729+07:00","closed_at":"2026-01-28T11:05:20.035496349+07:00","close_reason":"Added ValidationActivity with intent filter for org.akvo.afribamodkvalidator.VALIDATE_POLYGON"}
{"id":"afribamodkvalidator-hzw","title":"Basic Polygon Overlap Validation","description":"Implement plot overlap detection for field enumerators. Detects overlaps with both downloaded and unsubmitted local data, displays on satellite view, and returns validation errors to KoboToolbox form.","status":"closed","priority":1,"issue_type":"epic","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-30T13:34:14.832322061+07:00","created_by":"Iwan Firmawan","updated_at":"2026-01-30T17:02:32.242487298+07:00","closed_at":"2026-01-30T14:53:22.139918064+07:00","close_reason":"Replaced by 3 focused epics: Overlap Detection, Map Visualization, Sync Integration"}
{"id":"afribamodkvalidator-ie6","title":"Dynamic Rendering Logic","description":"Wire remaining UI interactions and finalize app.\n\n**Scope** (after ViewModels wiring is complete):\n\n1. **Resync Flow:**\n   - Wire resync FAB → KoboRepository.resync()\n   - Pass (addedCount, updatedCount, latestTimestamp) to SyncCompleteScreen\n\n2. **Logout Flow:**\n   - HomeDashboardScreen line 70: Clear database on logout\n   - Call AuthCredentials.clear()\n   - Clear SubmissionDao + FormMetadataDao\n\n3. **Detail Screen (if needed):**\n   - Parse rawData JSON for key-value display\n   - Dynamic rendering of form fields\n\n4. **Error Handling:**\n   - Show toast/snackbar on API failures\n   - Handle network offline state\n\n**Depends on:** ViewModels wiring (ExternalODK-3li.1)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-23T00:08:31.176419726+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.238925951+07:00","closed_at":"2026-01-23T00:33:27.078182611+07:00","close_reason":"Completed: 1) Logout flow clears SubmissionDao, FormMetadataDao, AuthCredentials. 2) Error handling shows ErrorScreenContent with retry button. 3) Resync flow works via LoadingViewModel.resync(). Detail screen deferred to future enhancement.","dependencies":[{"issue_id":"afribamodkvalidator-ie6","depends_on_id":"afribamodkvalidator-ftk","type":"blocks","created_at":"2026-01-23T00:12:53.198946006+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-j7c","title":"Add JTS Topology Suite dependency","description":"Add org.locationtech.jts:jts-core to build.gradle for geometry validation","status":"closed","priority":1,"issue_type":"task","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-28T10:28:42.394518876+07:00","created_by":"Iwan Firmawan","updated_at":"2026-01-30T17:02:32.238235463+07:00","closed_at":"2026-01-28T11:02:14.813114356+07:00","close_reason":"Added JTS 1.19.0 to libs.versions.toml and build.gradle.kts"}
{"id":"afribamodkvalidator-jyf","title":"Update toolbar to light theme style","description":"Change toolbar from primaryContainer color to surface/light background to match ODK Collect style","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-23T10:43:52.486401007+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.261266304+07:00","closed_at":"2026-01-23T11:03:54.554280809+07:00","close_reason":"Implemented HomeDashboard ODK Collect UI style refactoring","dependencies":[{"issue_id":"afribamodkvalidator-jyf","depends_on_id":"afribamodkvalidator-wj4","type":"blocks","created_at":"2026-01-23T10:44:04.150705848+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-k8g","title":"Write unit tests for polygon validation","description":"Test scenarios: A) Small polygon, B) Self-intersecting bowtie, C) Too few vertices, D) Valid polygon happy path","status":"closed","priority":2,"issue_type":"task","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-28T10:29:23.653397958+07:00","created_by":"Iwan Firmawan","updated_at":"2026-01-30T17:02:32.255285654+07:00","closed_at":"2026-01-28T11:10:42.975305086+07:00","close_reason":"Unit tests for all validation scenarios: valid polygon, too few vertices, area too small, self-intersecting","dependencies":[{"issue_id":"afribamodkvalidator-k8g","depends_on_id":"afribamodkvalidator-qbe","type":"blocks","created_at":"2026-01-28T10:57:56.438588082+07:00","created_by":"Iwan Firmawan"}]}
{"id":"afribamodkvalidator-l93","title":"Implement ValidationActivity with ODK intent handling","description":"Create ValidationActivity that: 1) Receives intent with value extra, 2) Parses WKT/ODK polygon format, 3) Returns RESULT_OK/RESULT_CANCELED","status":"closed","priority":1,"issue_type":"task","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-28T10:29:05.430355008+07:00","created_by":"Iwan Firmawan","updated_at":"2026-01-30T17:02:32.259158601+07:00","closed_at":"2026-01-28T11:05:28.237519912+07:00","close_reason":"Implemented PolygonValidationActivity and PolygonValidator with vertex count, area, and self-intersection checks","dependencies":[{"issue_id":"afribamodkvalidator-l93","depends_on_id":"afribamodkvalidator-dp2","type":"blocks","created_at":"2026-01-28T10:57:56.33454395+07:00","created_by":"Iwan Firmawan"}]}
{"id":"afribamodkvalidator-ldp","title":"Implement bottom sheet with plotName","description":"Show farmer info when polygon is tapped:\n\n1. Create BottomSheetDialogFragment\n2. Display plotName of tapped polygon\n3. Distinguish current vs overlapping plot\n4. Add Return to Kobo button","status":"closed","priority":1,"issue_type":"task","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-30T15:03:55.78830719+07:00","created_by":"Iwan Firmawan","updated_at":"2026-02-03T13:36:12.028332676+07:00","closed_at":"2026-02-03T13:36:12.028332676+07:00","close_reason":"Simplified to Toast notification for MVP. PlotName shown on polygon tap. Bottom sheet can be added as future enhancement if needed.","dependencies":[{"issue_id":"afribamodkvalidator-ldp","depends_on_id":"afribamodkvalidator-dqn","type":"blocks","created_at":"2026-01-30T15:09:03.37498628+07:00","created_by":"Iwan Firmawan"}]}
{"id":"afribamodkvalidator-nfu","title":"Detail \u0026 Result Screens (UI)","description":"Build screens for viewing generic data.","notes":"Screens: LoadingScreen (generic with message param), DownloadCompleteScreen, SyncCompleteScreen","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-21T09:29:04.543089583+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.236802348+07:00","closed_at":"2026-01-21T11:24:56.219201137+07:00","close_reason":"Implemented LoadingScreen with CircularProgressIndicator and 2s mock delay, DownloadCompleteScreen with summary and View/Resync buttons, SyncCompleteScreen with sync stats. Full mock navigation flow working.","dependencies":[{"issue_id":"afribamodkvalidator-nfu","depends_on_id":"afribamodkvalidator-g40","type":"parent-child","created_at":"2026-01-21T09:29:04.560249822+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-omq","title":"Add sorting feature with bottom sheet","description":"Add sort icon in toolbar, show bottom sheet with options: Name A-Z, Name Z-A, Date newest first, Date oldest first","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T10:43:50.320577405+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.256503581+07:00","closed_at":"2026-01-23T11:03:54.5517784+07:00","close_reason":"Implemented HomeDashboard ODK Collect UI style refactoring","dependencies":[{"issue_id":"afribamodkvalidator-omq","depends_on_id":"afribamodkvalidator-wj4","type":"blocks","created_at":"2026-01-23T10:44:04.134382088+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-pkt","title":"Migrate from OSMDroid to Mapbox SDK for satellite imagery","description":"## Context\nUser AC requires 'high-resolution satellite view' for overlap visualization, but current implementation uses OpenStreetMap street tiles via OSMDroid.\n\n## Current State\n- OfflineMapScreen.kt downloads OSM street map tiles\n- MapPreviewActivity.kt displays polygons on street map\n- OfflineTileSource.kt provides shared OSM tile source\n- Offline download works but shows roads, not satellite imagery\n\n## Required Changes\n\n### 1. Add Mapbox Dependencies\n- Add Mapbox Maps SDK for Android\n- Add Mapbox Offline plugin\n- Configure Mapbox access token (store securely, not in code)\n\n### 2. Update MapPreviewActivity\n- Replace OSMDroid MapView with MapboxMap\n- Keep same polygon overlay logic (blue=current, red=overlapping)\n- Keep tap-to-show-info functionality\n- Use Mapbox satellite-streets style for satellite + labels\n\n### 3. Update OfflineMapScreen\n- Replace OSMDroid CacheManager with Mapbox OfflineManager\n- Download satellite tiles for configured regions\n- Track download progress (existing UI can be reused)\n- Handle offline region management (list, delete, update)\n\n### 4. Remove OSMDroid\n- Remove OfflineTileSource.kt\n- Remove OfflineTileManager.kt\n- Remove OSMDroid dependencies from build.gradle\n\n### 5. Testing\n- Verify offline download for Pasunggingan region\n- Verify polygon display in offline mode\n- Verify satellite imagery quality at zoom 15-18\n\n## Acceptance Criteria\n- [ ] Satellite imagery visible in MapPreviewActivity\n- [ ] Offline download works for configured regions\n- [ ] Polygons display correctly over satellite view\n- [ ] Works fully offline after initial download\n\n## Notes\n- Mapbox free tier: 25,000 monthly active users\n- Estimated tile size: 50-100 MB per woreda at zoom 15-18\n- Mapbox token should be in local.properties or secrets management","status":"closed","priority":2,"issue_type":"feature","owner":"firmawaneiwan@gmail.com","created_at":"2026-02-04T16:04:37.556834194+07:00","created_by":"Iwan Firmawan","updated_at":"2026-02-04T16:47:42.879641301+07:00","closed_at":"2026-02-04T16:47:42.879641301+07:00","close_reason":"Migrated from OSMDroid to Mapbox SDK v11.18.1:\n- MapPreviewActivity uses Mapbox with SATELLITE_STREETS style\n- OfflineMapScreen uses MapboxOfflineManager for satellite tile downloads  \n- Removed all OSMDroid code and dependencies\n- Created MapBoundingBox to replace OSMDroid BoundingBox\n- Updated README.md and implementation plan docs\n- Mapbox tokens configured via local.properties (gitignored)"}
{"id":"afribamodkvalidator-pqs","title":"Initial Download (Parsing)","description":"Fetch form submissions from KoboToolbox API and store in Room database.\n\n## Implementation Tasks\n\n1. Create KoboRepository class\n   - Inject KoboApiService, SubmissionDao, FormMetadataDao\n   - Implement getSubmissions(assetUid: String) suspend function\n\n2. Implement Pagination Loop\n   - Fetch with limit=300 per page\n   - Continue until 'next' is null in response\n   - Handle API errors gracefully\n\n3. Transform DTO to Entity\n   - Extract system fields: _uuid, _id, submissionTime, submittedBy\n   - Parse submissionTime (ISO 8601 string -\u003e Long timestamp)\n   - Store dynamic form fields as rawData JSON string\n   - Map geolocation/tags to systemData if present\n\n4. Save to Database\n   - Use SubmissionDao.insertAll() for batch inserts\n   - Update FormMetadataEntity.lastSyncTimestamp after success\n\n## Existing Components\n- DTOs: KoboSubmissionDto, KoboDataResponse (data/dto/)\n- Entities: SubmissionEntity, FormMetadataEntity (data/entity/)\n- DAOs: SubmissionDao, FormMetadataDao (data/dao/)\n\n## Dependencies\n- Requires networking layer (ABPlotValidator-qwy) to be completed first","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T18:45:07.733347622+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.196759979+07:00","closed_at":"2026-01-22T23:37:32.534699188+07:00","close_reason":"Implemented KoboRepository with pagination, DTO to Entity transformation, and date parsing. Added core library desugaring for java.time support on API 24+.","dependencies":[{"issue_id":"afribamodkvalidator-pqs","depends_on_id":"afribamodkvalidator-4ym","type":"parent-child","created_at":"2026-01-22T18:51:52.585072816+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-qbe","title":"Implement polygon validation logic","description":"Implement validation checks: 1) Vertex count \u003e= 4, 2) Area \u003e MIN_AREA threshold with geodetic conversion, 3) Self-intersection check using JTS isValid","status":"closed","priority":1,"issue_type":"task","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-28T10:29:12.413598378+07:00","created_by":"Iwan Firmawan","updated_at":"2026-01-30T17:02:32.275730276+07:00","closed_at":"2026-01-28T11:05:28.24471772+07:00","close_reason":"Implemented PolygonValidationActivity and PolygonValidator with vertex count, area, and self-intersection checks","dependencies":[{"issue_id":"afribamodkvalidator-qbe","depends_on_id":"afribamodkvalidator-l93","type":"blocks","created_at":"2026-01-28T10:57:56.368794844+07:00","created_by":"Iwan Firmawan"}]}
{"id":"afribamodkvalidator-rj7","title":"Submission Detail Screen - Show all answers when clicking item","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-23T14:11:37.252441135+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.205037942+07:00","closed_at":"2026-01-23T14:20:29.235665221+07:00","close_reason":"All tasks completed - submission detail screen fully implemented"}
{"id":"afribamodkvalidator-skl","title":"Setup offline satellite imagery by region","description":"Enable offline map tiles for field use:\n\n1. Define region bounding boxes\n2. Implement offline region download (zoom 15-18)\n3. Create UI for download progress\n4. Store in app internal storage (~50-100 MB per region)","status":"closed","priority":2,"issue_type":"task","owner":"firmawaneiwan@gmail.com","created_at":"2026-01-30T15:03:57.395621885+07:00","created_by":"Iwan Firmawan","updated_at":"2026-02-03T16:44:39.80523155+07:00","closed_at":"2026-02-03T16:44:39.80523155+07:00","close_reason":"Implemented offline tile download with JSON-based region config, download progress UI, and map preview integration","dependencies":[{"issue_id":"afribamodkvalidator-skl","depends_on_id":"afribamodkvalidator-7sg","type":"blocks","created_at":"2026-01-30T15:09:05.34647109+07:00","created_by":"Iwan Firmawan"}]}
{"id":"afribamodkvalidator-tha","title":"Resync Logic (Delta)","description":"Implement delta sync to fetch only new/updated submissions since last sync.\n\n## Implementation Tasks\n\n1. Extend KoboRepository with resync functionality\n   - Implement resync(assetUid: String) suspend function\n   - Get lastSyncTimestamp from FormMetadataEntity\n   - Add query parameter: submissionTime__gt=lastSyncTimestamp\n\n2. Handle Delta Response\n   - Fetch submissions where submissionTime \u003e lastSyncTimestamp\n   - Transform to entities (same as initial download)\n   - Perform upsert based on _uuid (ON CONFLICT REPLACE)\n\n3. Update Sync State\n   - After successful sync, update FormMetadataEntity.lastSyncTimestamp\n   - Use latest submission's timestamp for next delta\n\n## Database Support (Already Implemented)\n- FormMetadataEntity has lastSyncTimestamp field\n- SubmissionDao.insertAll uses ON CONFLICT REPLACE strategy\n- FormMetadataDao.insertOrUpdate handles upsert\n\n## Dependencies\n- Requires Initial Download (AfriBamODKValidator-if7) to be completed first","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T18:46:54.112561034+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.232660441+07:00","closed_at":"2026-01-22T23:46:45.254692499+07:00","close_reason":"Implemented resync function with delta sync using lastSyncTimestamp. Falls back to full fetch if no previous sync exists.","dependencies":[{"issue_id":"afribamodkvalidator-tha","depends_on_id":"afribamodkvalidator-4h6","type":"parent-child","created_at":"2026-01-22T18:52:14.438927229+07:00","created_by":"iwan"},{"issue_id":"afribamodkvalidator-tha","depends_on_id":"afribamodkvalidator-9wa","type":"blocks","created_at":"2026-01-22T22:46:53.763331212+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-tqj","title":"Submission Detail Screen - Show all answers when clicking item","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-23T14:11:37.252441135+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.240664896+07:00","closed_at":"2026-01-23T14:20:29.235665221+07:00","close_reason":"All tasks completed - submission detail screen fully implemented"}
{"id":"afribamodkvalidator-up3","title":"Database Setup \u0026 Entities","description":"Define the offline storage schema.","notes":"Implemented Generic Hybrid Schema with Room: SubmissionEntity (system columns + rawData JSON blob), FormMetadataEntity (sync tracking), SubmissionDao (CRUD queries), FormMetadataDao, AppDatabase with TypeConverters, Hilt DatabaseModule, and Kotlinx Serialization DTOs (KoboSubmissionDto, KoboDataResponse). Build verified successful.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-21T15:28:42.677016+07:00","created_by":"iwanfirmawan","updated_at":"2026-01-30T17:02:32.271573982+07:00","closed_at":"2026-01-21T16:27:06.848847+07:00","dependencies":[{"issue_id":"afribamodkvalidator-up3","depends_on_id":"afribamodkvalidator-z09","type":"parent-child","created_at":"2026-01-21T15:35:59.586337+07:00","created_by":"iwanfirmawan"}]}
{"id":"afribamodkvalidator-wj4","title":"Refactor HomeDashboard to ODK Collect UI style","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-23T10:43:20.468204825+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.277030409+07:00","closed_at":"2026-01-23T11:04:10.311583338+07:00","close_reason":"All tasks completed - HomeDashboard refactored to ODK Collect UI style"}
{"id":"afribamodkvalidator-x64","title":"Update date format to 'Synced on [date] at [time]'","description":"Change submissionTime display format from '2026-01-21 09:30' to 'Synced on Tue, Jan 21, 2026 at 09:30'","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T10:43:46.386996571+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.257646627+07:00","closed_at":"2026-01-23T11:03:54.546728242+07:00","close_reason":"Implemented HomeDashboard ODK Collect UI style refactoring","dependencies":[{"issue_id":"afribamodkvalidator-x64","depends_on_id":"afribamodkvalidator-wj4","type":"blocks","created_at":"2026-01-23T10:44:04.101246401+07:00","created_by":"iwan"}]}
{"id":"afribamodkvalidator-xmk","title":"Dynamic Rendering Logic","description":"Wire remaining UI interactions and finalize app.\n\n**Scope** (after ViewModels wiring is complete):\n\n1. **Resync Flow:**\n   - Wire resync FAB → KoboRepository.resync()\n   - Pass (addedCount, updatedCount, latestTimestamp) to SyncCompleteScreen\n\n2. **Logout Flow:**\n   - HomeDashboardScreen line 70: Clear database on logout\n   - Call AuthCredentials.clear()\n   - Clear SubmissionDao + FormMetadataDao\n\n3. **Detail Screen (if needed):**\n   - Parse rawData JSON for key-value display\n   - Dynamic rendering of form fields\n\n4. **Error Handling:**\n   - Show toast/snackbar on API failures\n   - Handle network offline state\n\n**Depends on:** ViewModels wiring (ABPlotValidator-3li.1)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-23T00:08:31.176419726+07:00","created_by":"iwan","updated_at":"2026-01-30T17:02:32.210277177+07:00","closed_at":"2026-01-23T00:33:27.078182611+07:00","close_reason":"Completed: 1) Logout flow clears SubmissionDao, FormMetadataDao, AuthCredentials. 2) Error handling shows ErrorScreenContent with retry button. 3) Resync flow works via LoadingViewModel.resync(). Detail screen deferred to future enhancement."}
{"id":"afribamodkvalidator-z09","title":"Database Setup (SQLite/Room) \u0026 Serialization","description":"Generic Hybrid Schema for dynamic form support. Strategy: System Columns (indexed for sorting/filtering: _uuid, assetUid, _id, submissionTime, submittedBy) + JSON Blob (rawData stores full dynamic payload). Detail screens parse rawData as key-value pairs for display. Supports ANY form type without schema-specific columns. Based on UI First: UI built with mock data, now implementing actual persistence layer.","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-01-21T15:23:48.190228+07:00","created_by":"iwanfirmawan","updated_at":"2026-01-30T17:02:32.244581125+07:00","closed_at":"2026-01-21T18:29:10.661221+07:00","close_reason":"Closed"}
